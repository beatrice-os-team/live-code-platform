// 测试重命名功能修复
// 验证重命名后原目录不会重新出现

import fs

print("=== 重命名功能测试 ===")

// 1. 首先列出初始目录结构
print("\n1. 初始目录结构:")
// 这里需要通过列出目录按钮查看

// 2. 创建一个测试目录
print("\n2. 创建测试目录:")
fs.mkdir("/demo/test_rename_dir")
fs.write("/demo/test_rename_dir/test_file.txt", "这是测试文件")
print("✅ 创建了 /demo/test_rename_dir 和测试文件")

// 3. 重命名测试目录
print("\n3. 重命名测试目录:")
print("将要重命名: /demo/test_rename_dir -> /demo/renamed_test_dir")
// 这里需要通过重命名目录按钮操作

// 4. 验证重命名结果
print("\n4. 验证步骤:")
print("请依次点击以下按钮验证:")
print("   a) 点击'列出目录'按钮，输入 /demo")
print("   b) 检查是否只有 renamed_test_dir，没有 test_rename_dir")
print("   c) 点击'列出目录'按钮，输入 /demo/renamed_test_dir") 
print("   d) 检查是否能看到 test_file.txt")

print("\n=== 测试说明 ===")
print("如果修复成功，重命名后的目录应该：")
print("✅ 原目录消失 (test_rename_dir)")
print("✅ 新目录存在 (renamed_test_dir)") 
print("✅ 文件内容保持完整")
print("❌ 原目录不应该重新出现")

print("\n💡 操作提示:")
print("1. 先运行这个脚本创建测试环境")
print("2. 使用'重命名目录'按钮重命名 /demo/test_rename_dir")
print("3. 使用'列出目录'按钮验证结果")
print("4. 如果看到两个目录同时存在，说明还有bug")
print("5. 如果只看到新目录，说明修复成功!")
